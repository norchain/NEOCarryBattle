# 《卡莱战纪》体验篇



《卡莱战纪》是一款核心逻辑上链的区块链卡牌游戏。 是第一款在拜占庭共识网络上**模拟拜占庭将军问题**的链游, 同时也是第一款**靠去中心化连载小说推动**的链游。目前版本由norchain.io 基于NEO区块链基础设施研发。

本篇主要讨论《卡莱》为满足不同类型玩家在游戏中获得的乐趣体验而做的细节设计。关于宏观的玩法介绍见[设计篇](https://github.com/norchain/NEOCarryBattle/blob/master/%E5%8D%A1%E8%8E%B1%E6%88%98%E7%BA%AA-%E8%AE%BE%E8%AE%A1.md)， 关于技术实现见[技术篇](https://github.com/norchain/NEOCarryBattle/blob/master/%E5%8D%A1%E8%8E%B1%E6%88%98%E7%BA%AA-%E6%8A%80%E6%9C%AF.md)。



## 1. 核心玩法体验



### 1.1 等待期间操作

作为全链游戏，在享用区块链技术带来的很多便利和特性的同时也可能会带来对玩家体验的限制，其中最主要的是由于区块生成速度慢，单个玩家很难对“服务器”进行频繁操作。

《卡莱》的核心玩法每场战役对链上的写入操作最多只有两次（非对称熵算法中的行动和验证两次, 见[技术篇](https://github.com/norchain/NEOCarryBattle/blob/master/%E5%8D%A1%E8%8E%B1%E6%88%98%E7%BA%AA-%E6%8A%80%E6%9C%AF.md)2.2），操作的间隔会因各服配置不同以满足不同玩家的娱乐倾向，最小的间隔可能是2、3分钟，最长可能是数小时(详见下文c项“软分服配置”)。升级卡牌和交易更是低频操作。因此单用户不会对链流量造成过大压力。

那么除了链交互外，如何让玩家获得持续有趣而有利的互动体验呢。很多传统游戏里给了我们启发：比如挂机游戏需要等待资源涨足才能做有意义的操作，再比如《[瘟疫公司](https://www.ndemiccreations.com/en/22-plague-inc)》也有大量等待的过程。

#### 1.2.1 调研和模拟 

![battle](pics/Battle.jpg)

分服的玩家数量规模一般不会太大(我们初步估略上限可能在30-50，同技术篇所述，也是为了限制合约查找卡牌和玩家的成本)，使得战前充分研究具有可行性，理性类型的玩家为获得最达胜率。可以做的准备包括：

* 查看玩家即将攻击城市的历史记录，研究现在的城主的人气和潜在的盟友。

* 思考其他玩家信息真伪。玩家会通过客户端查询比较各种数据，查看特定玩家之前在攻守同盟时的放鸽子记录，尤其是他声明要帮助你攻城或守城时。

* 调整卡牌阵型来模拟战争。在进攻之前，可以充分调整自己的出战阵型，尽量保证胜率的最大化。 


#### 1.2.2 本地随机事件

![map](pics/map.jpg)

我们也引入一些有趣的因子来让玩家能频繁进行本地交互，纯为增强用户体验，交互结果在客户端可能表现壮丽，但对数据影响可能微乎其微。

**加速税收：**《卡莱》里玩家一个重要的收入来源是占城收税。所以玩家在等待期间可以通过点击地图上的城池来非常少比例的影响税收。具体说来，他们可以像挂机游戏一样不停点自己的城池来暂时增加一些税收。但不管玩家点的多快多爽，客户端逻辑将隔段时间才统一向链提交一次，对税收的影响最快也不会超过1%。（有点类似挂机游戏里的手动挖矿）

**积极性因子** 客户端会随时在地图上生成一些事件，玩家对事件的积极响应会小幅影响随后一段时间的战争结果，性质和影响力和**加速税收** 类似。某些事件还会触发内置的小游戏。积极性因子事件比如有：

* 玩家占领城市随机出现损坏，需玩个小拼图游戏解决，否则不能出兵。
* 地图出现一些战争物资，消失前点击捡拾（类似瘟疫公司手动捡DNA）。
* 出现灾难事件，玩打地鼠游戏支援。

**历史知识及小说阅读**：玩游戏之外还有意外的收获

1. 玩家在等待占城或等待战斗期间可以阅读最新章节的小说。
2. 玩家点击某个城市图标时，有机率看到和这个城市相关的一段历史故事。




### 1.2 软分服配置

玩家有不同的体验需求。有人喜欢玩爽，希望快速战斗也不想思考援军、叛徒之类的复杂因素。有人则喜欢细致长考，深刻分析局势并到链外社区拉拢人头后才开始一战。有人喜欢体验真的拜占庭问题假假真真，有人则更倾向无法倒戈的传统联盟战争。为尽量满足大多数玩家需求，开新服时需要提供如下表服务器参数：

| 参数名             | 含义                                        | 影响                                                         |
| ------------------ | ------------------------------------------- | ------------------------------------------------------------ |
| is_asymmentropy    | 是否采用非对称熵方法                        | 如果非，游戏演化为普通组团PvP游戏，逻辑简化成一个阶段，行军完毕就结算。 |
| is_force_notify    | 是否强制在行动阶段广播自己的目标            | (“广播”见技术篇2.2) 如果值为no，玩家行为可能更迷雾           |
| is_cloak_dest      | 是否隐瞒目的地                              | 如果非，那玩家拜占庭问题复杂度不不包括目的地，只包括玩家支持立场 |
| interval_action    | 非对称熵方法中的行动时间长度                | 越长越支持复杂大规模团战。                                   |
| interval_check     | 非对称熵方法中的验证时间长度                | 越长越支持复杂大规模团战。                                   |
| cooldown_nocheck   | 对验证阶段不发送check的玩家的惩罚(冷却时间) | 决定该服是否支持玩家乱放烟雾                                 |
| interval_min_novel | 小说更新最小时间间隔                        |                                                              |
| ...                | 其他参数                                    |                                                              |

其中，最接近模拟真实世界的玩法是提供最小确定性信息的玩法: 

>  {**is_asymmentropy** :true, **is_force_notify**:false, **is_cloak_dest**: true, **interval_declaim**: long, **interval_check** : long, **cooldown_nocheck**: 0, **interval_min_novel**: short }

在做决定前你有很长时间仔细查阅资料及思考，但是你不知道别人是敌是友，不知道其意图。虽然有一帮人各自宣称自己支持谁，但不到最终一刻谁也不知道谁是真的盟友。所有人有权始终保持沉默，骗了你也不会得到直接惩罚。为了弥补身心怅然，你有一部旧约故事可读可辩。



最简单直接的玩法是信息确定性最强玩法:

>  {**is_asymmentropy**: false, **is_force_notify**:true, **is_cloak_dest**: false, **interval_declaim**: 0, **interval_check** : ~0, **cooldown_nocheck**: ~0, **interval_min_novel**: extremely_long}

, 本地调整好卡牌阵型后一键开打（降维成大掌门那样1v1的传统卡牌对战游戏）：

在这两种极端之间，可预期有多种合理的配置组合让每种玩家都能找到自己的乐趣。

此外，不管分服如何配置，每次战斗总收益上限始终是与interval_action+interval_check 成正比的。因此保证不管在哪个服务器配置情况下在单位时间里总收益不会浮动太大。



## 2. 小说玩法体验

![novelTree](pics/novelTree.jpeg)

去中心化投票的连载小说是《卡莱》设计中不可或缺的一环。

**从战略角度**，靠去中心化投票的连载小说是《卡莱》的创新符号和文化担当，它同时也有潜力成为让更多非技术背景网民加深了解区块链技术的媒介。如上图所示小说本身结构就很区块链，不同与传统小说的直线式篇章，去中心化小说的树状结构代表着由于无法达成共识而形成的分叉，我们让玩家的民主立场而非机器算法去完成共识的过程生成主链。

**从作家角度**，与传统难以协调作者的协作型小说相比，小说的发展由读者公平投票决定来决定。情节发展对游戏世界平衡的反影响、投票机制和去中心化代币稿费激励为作者提供新鲜的体验、认同感和灵感刺激。另外，分服的设计可以避免多个好作家被掩埋。假如对小说情节发展出现强烈的争议，投票失败作品的支持者可以选择集体迁服。

**从游戏而言**，去中心化小说也提供了更丰富的随机性、时空化的体验并与核心玩法相辅相成。





## 常见疑问

**欢迎通过Pull Request在此提交问题，我们将尽快给予回答或讨论，以更好完善游戏设计。**



Q: 要是小说连载完了该怎么办？

A: 首先由于GAS限制，我们设定每篇最多8000字符(4千汉字)，分服限制发表间隔(interval_min_novel)的最小值目前是1周。这样一部50万字的小说大概要连载2年多。其次只要分服玩家同意，